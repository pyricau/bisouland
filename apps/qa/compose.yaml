name: bisouland-qa

services:
  app:
    build: .
    command: php -S 0.0.0.0:8080 -t public
    ports:
      - "43010:8080"
    volumes:
      # Mount current directory into container for QA tools and configs
      - .:/apps/qa
      - vendor:/apps/qa/vendor
      # Mount shared packages
      - ../../packages:/packages
      # Mount the monolith source code for analysis
      - ../monolith:/apps/monolith
      # Mount the monolith's vendor volume for PHPStan analysis
      - bisouland-monolith_vendor:/apps/monolith/vendor
    networks:
      - default
      - bisouland-monolith_default

networks:
  bisouland-monolith_default:
    external: true

volumes:
  vendor:
  bisouland-monolith_vendor:
    external: true
